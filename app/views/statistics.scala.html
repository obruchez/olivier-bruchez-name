@import models.statistics._
@import models.statistics.BarChartValueSet
@(statistics: Statistics)

@scripts = {
  <script type="text/javascript" src="@routes.Assets.at("plugins/moment.min.js")"></script>
  <script type="text/javascript" src="@routes.Assets.at("plugins/chart.js")"></script>
}

@ratingsDistribution(ratings: Seq[(String, Int)], entity: String) = {
  @{
    val barChart = BarChart(
      baseId = s"${entity.toLowerCase}-ratings-distribution",
      title = s"$entity ratings (distribution)",
      datasetLabel = "Count",
      labels = ratings.map(_._1),
      valueSets = Seq(BarChartValueSet(values = ratings.map(_._2), color = Color("C0C0C0"))))

    views.html.barchartsection(barChart)
  }
}

@main(Sitemap.statistics, scripts) {
  <div class="headline"><h2>Books</h2></div>

  @{
    val pieChart = PieChart(
      baseId = "most-read-book-authors",
      title = "Most read authors",
      entityName = "Author",
      valueUnit = "Count",
      statistics.mostReadBookAuthors,
      threshold = Some(2),
      maxValueCount = Some(17))

    views.html.piechartsection(pieChart)
  }

  @ratingsDistribution(statistics.bookRatingsDistribution, "Book")

  <div class="headline"><h2>Concerts</h2></div>

  @{
    val pieChart = PieChart(
      baseId = "most-seen-concert-artists",
      title = "Most seen artists",
      entityName = "Artist",
      valueUnit = "Count",
      statistics.mostSeenConcertArtists(mainMusiciansOnly = false),
      threshold = Some(6),
      maxValueCount = Some(17))

    views.html.piechartsection(pieChart)
  }

  @{
    val pieChart = PieChart(
      baseId = "most-seen-concert-artists-main-musicians-only",
      title = "Most seen artists (main musicians only)",
      entityName = "Artist",
      valueUnit = "Count",
      statistics.mostSeenConcertArtists(mainMusiciansOnly = true),
      threshold = Some(4),
      maxValueCount = Some(17))

    views.html.piechartsection(pieChart)
  }

  @{
    val pieChart = PieChart(
      baseId = "most-visited-concert-venues",
      title = "Most visited concert venues",
      entityName = "Concert venue",
      valueUnit = "Count",
      statistics.mostVisitedConcertVenues,
      threshold = Some(3),
      maxValueCount = Some(17))

    views.html.piechartsection(pieChart)
  }

  <p>Note: venues are counted at most once per day.</p>

  @ratingsDistribution(statistics.concertRatingsDistribution, "Concert")

  <div class="headline"><h2>Movies</h2></div>

  @{
    val pieChart = PieChart(
      baseId = "most-seen-movies",
      title = "Most seen movies",
      entityName = "Movie",
      valueUnit = "Count",
      statistics.mostSeenMovies,
      threshold = Some(2),
      maxValueCount = Some(17))

    views.html.piechartsection(pieChart)
  }

  @{
    val pieChart = PieChart(
      baseId = "most-seen-movie-directors",
      title = "Most seen directors",
      entityName = "Director",
      valueUnit = "Count",
      statistics.mostSeenMovieDirectors,
      threshold = Some(4),
      maxValueCount = Some(17))

    views.html.piechartsection(pieChart)
  }

  @ratingsDistribution(statistics.movieRatingsDistribution, "Movie")

  <div class="headline"><h2>Plays</h2></div>

  @{
    val pieChart = PieChart(
      baseId = "most-seen-play-authors",
      title = "Most seen authors",
      entityName = "Author",
      valueUnit = "Count",
      statistics.mostSeenPlayAuthors,
      threshold = Some(2),
      maxValueCount = Some(17))

    views.html.piechartsection(pieChart)
  }

  @{
    val pieChart = PieChart(
      baseId = "most-seen-play-directors",
      title = "Most seen directors",
      entityName = "Director",
      valueUnit = "Count",
      statistics.mostSeenPlayDirectors,
      threshold = Some(2),
      maxValueCount = Some(17))

    views.html.piechartsection(pieChart)
  }

  @{
    val pieChart = PieChart(
      baseId = "most-seen-play-actors",
      title = "Most seen actors",
      entityName = "Actor",
      valueUnit = "Count",
      statistics.mostSeenPlayActors,
      threshold = Some(3),
      maxValueCount = Some(17))

    views.html.piechartsection(pieChart)
  }

  @{
    val pieChart = PieChart(
      baseId = "most-visited-play-theatres",
      title = "Most visited theatres",
      entityName = "Theatre",
      valueUnit = "Count",
      statistics.mostVisitedPlayTheatre,
      threshold = Some(2),
      maxValueCount = Some(17))

    views.html.piechartsection(pieChart)
  }

  @ratingsDistribution(statistics.playRatingsDistribution, "Play")
}
